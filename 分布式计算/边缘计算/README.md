# 边缘计算

在集中化日益提高的时候，网络的发展不一定赶的上应用的需求发展。同时网络总存在着一些不稳定性。为了解决这些场景的问题，就出来了边缘计算。边缘计算将应用程序、 数据和计算能力服务从集中式数据中心推到网络的逻辑极限，靠近用户、设备和传感器。它使计算的使用方能够在正确的时间将正确的数据放在正确的位置，支持快速和安全的访问。

边缘计算典型的应用场景就是物联网，现阶段物联网的主要运算能力都是由云计算提供的，边缘计算不是在中央服务器里整理后实施处理，而是在网络内的各设备实时处理，所有的智能设备都能成为“数据中心”。因此，边缘计算带来了更快的传输和响应速度，同时边缘计算利用了传统云计算的遗漏区域，产能比更划算。

![边缘计算，节点-计算-数据中心](https://s2.ax1x.com/2019/10/03/uw7zd0.png)

# 背景分析

降低成本，包括流量成本、存储成本、云端流式计算资源成本。在弱网络环境下，提升流式计算结果的准确性。

## 场景案例

### 数据分析师的取数场景

在数据分析场景下，数据分析师经常使用「10 分钟平均值」或「15 分钟平均值」作为样本数据进行分析，而不会直接使用原始采集数据。如果云平台当中只有原始采集数据，数据分析师通常使用以下几种方式获取「10 分钟平均值」：

导出原始数据，通过数据预处理工具获取 10 分钟平均值
云平台增加流式计算任务，计算 10 分钟平均值并实时保存在数据库
通过大数据平台对历史数据执行离线任务，计算历史数据的 10 分钟平均值并保存在数据库
上述的几种方案能够让数据分析师拿到 10 分钟平均值，但是成本都很高，也不方便。

通过边缘流式计算可以很好的解决上述问题，边缘节点在边缘侧通过流式计算得到 10 分钟平均值，然后上报至云端 iothub，经由规则引擎将 10min 数据转存到数据库，可以大大降低数据分析师的取数难度。

### 运维人员的实时监控场景

在物联网场景下，设备测量数据因为各种因素（网络因素、设备自身精度因素）经常会出现抖动情况，如果对设备的实时采集值配置阈值告警，经常会出现误告警，导致用户需要处理大量无用告警，逐渐用户对告警的准确性失去信心，阈值告警形同虚设。

针对这种场景，用户可以借助流式计算的能力来降低数据抖动带来的偏差，常见的方案有：

按平均值告警：通过流式计算获取 10 分钟平均值、10 分钟最大值、10 分钟最小值、10 分钟计算样本数，然后设定阈值规则，比如“10 分钟平均值>阈值 且 10 分钟计算样本数>100”
按持续时间告警：通过流式计算找出实时采集值一直大于指定阈值且持续时间很长的设备，比如"设备温度>100℃ 且 持续时长>5 分钟"
在网络不稳定的场景下，上述两种方案如果通过云端流式计算来实现，最终得到的计算值准确度不高，比如当设备出现 5 分钟无连接的时候，云端再去计算 10 分钟平均值，计算的结果并不准确。而边缘侧是内网环境，网络异常的概率大大降低。在边缘侧将统计值计算好后再上报云端，可以大大提升流式计算统计结果的准确性。
